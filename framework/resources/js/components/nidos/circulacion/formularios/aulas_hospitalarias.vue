<template>
	<form @submit="guardarSolicitudAulaHospitalaria">
		<div class="col-lg-8 offset-lg-2">
			<div class="text-center m-2">
				<img src="https://nidos.gov.co/sites/default/files/logo_nidos.png" class="img-fluid">
			</div>
			<div class="card">
				<div class="card-body">
					<h2>OFERTA IDARTES - AULAS HOSPITALARIAS 2021</h2>
					<p>La misión del Instituto Distrital de las Artes - IDARTES es garantizar el pleno ejercicio y disfrute de los derechos culturales por parte de la ciudadanía, acercando las prácticas artísticas y la vivencia de sus diferentes dimensiones a la vida cotidiana de las personas; mediante la ejecución de las políticas públicas, proyectos, planes y programas que aporten a la construcción de un nuevo contrato social que contribuya al desarrollo de las personas como seres creativos, sensibles, solidarios y corresponsables con los otros seres vivos que les rodean.</p>

					<p>Desde el Instituto Distrital de las Artes se ha avanzado en una articulación con el Programa Aulas Hospitalarias, buscando garantizar los derechos culturales y artísticos a niñas, niños y jóvenes que asisten a este programa. Se propone adelantar atenciones desde 3 unidades de gestión: 
					El programa NIDOS, para la primera infancia (de 0 a 5 años de edad) a través de las líneas En-cuentados y En-cantados y obras artísticas, el programa CREA a través de la línea Impulso Colectivo (de 6 años en adelante); y el Programa Libro al Viento con el consultorio telefónico (de 13 años en adelante).</p>
				</div>
			</div>
			<div class="card">
				<div class="card-header bg-info"><i class="fas fa-handshake fa-2x"></i> AUTORIZACIÓN</div>
				<div class="card-body">
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label>Autorización para el uso de datos - Programa Nidos</label>
							<p>La presente autorización para el tratamiento de datos personales establece los términos y condiciones en virtud de los cuales el INSTITUTO DISTRITAL DE LAS ARTES (en adelante IDARTES), que actuará como responsable del tratamiento, identificado con el NIT No. 900.413.030-9 y con domicilio en la Carrera 8 No. 15 – 46, de la ciudad de Bogotá, Con dirección electrónica https://www.idartes.gov.co/, realizará el tratamiento de sus datos personales y en tal virtud podrá, recolectar, almacenar y usar, transferir o trasmitir, en ejercicio del objetivo y deberes encargados al IDARTES en virtud del acuerdo 440 del 24 de junio de 2010, del Consejo de Bogotá y en desarrollo de las siguientes finalidades:</p>
							<ol>
								<li><p>TRATAMIENTO Y FINALIDAD:</p></li>
								<dl>
									<dd>1.1. Finalidades Especificas del programa NIDOS.</dd>
									<dd>a. Efectuar gestiones pertinentes para el desarrollo del objeto social del IDARTES, a través del programa “Nidos - Arte en Primera Infancia", gestiones que consisten en el desarrollo de atenciones por medio de experiencias artísticas presenciales y virtuales con el objetivo de aportar Oficina Asesora Jurídica al desarrollo y a la formación integral del ser, en niños y niñas menores de 6 años, junto con sus familiares y/o adultos cuidadores, maestros, artistas y demás agentes que se encuentren en contacto con esta población.</dd>
									<dd>b. Almacenar los datos que sean necesarios, para cumplir con deberes legales a los cuales este sujeto el IDARTES, en desarrollo de los objetivos y deberes asignados por el acuerdo 440 del Consejo Superior de Bogotá y las demás normas que correspondan al cumplimiento de su misión.</dd>
									<dd>c. Gestionar trámites relacionados a peticiones, quejas o reclamos de los titulares de los datos, o de sus representantes legales.</dd>
									<dd>d. Contactar al titular o su representante legal para el envió de información referente al cambio de la finalidad o en la política de protección de datos personales de la entidad.</dd>
									<dd>e. Contactar al titular de los datos o a su representante legal para informar, de nuevas iniciativas en cabeza de la entidad, cuyo objeto guarde relación con el proyecto NIDOS arte en primera infancia.</dd>
									<dd>f. Prestar los demás servicios ofrecidos por el programa “Nidos - Arte en Primera Infancia”, los cuales fueron informados al titular y su representante legal en su totalidad.</dd>
									<dd>g. El IDARTES también podrá intercambiar información personal con autoridades gubernamentales o públicas de otro tipo (incluidas, entre otras autoridades judiciales o administrativas, autoridades fiscales y organismos de investigación penal, civil, administrativa, disciplinaria y fiscal) y terceros participantes de las actividades, para las que fueron Oficina Asesora Jurídica recolectados, para cumplir con leyes vigentes; procesos jurídicos; para responder a las solicitudes de autoridades.</dd>
								</dl>

								<dl>
									<dd>1.2. Finalidades Generales establecidas por el Instituto Distrital de las Artes- IDARTES, en su política de protección de datos personales.</dd>
									<dd>a. Para permitir el desarrollo del objeto y las funciones, en cabeza del Instituto Distrital de las Artes (IDARTES), en los términos contenidos en Acuerdos No. 440 de 2010 “por el cual se crea el Instituto Distrital de las Artes” y el Acuerdo No. 02 del 2017 “Por el cual se modifica la estructura organizacional del Instituto Distrital de las Artes- IDARTES”.</dd>
									<dd>b. Lograr una eficiente comunicación, en lo relacionada con los planes, programas, proyectos y trámites administrativos misionales, relacionados con las funciones propias del IDARTES</dd>
									<dd>c. Desarrollar los estudios previos y procesos de selección para la contratación oficial del IDARTES, destinada a garantizar el funcionamiento de la entidad y la ejecución y/o desarrollo de programas, planes y proyectos.</dd>
									<dd>d. Realizar la selección, contratación y/o vinculación de servidores públicos y contratistas de prestación de servicios de la entidad.</dd>
									<dd>e. Formular, ejecutar y evaluar los programas de salud ocupacional y planes de atención de emergencias.</dd>
									<dd>f. Mantener actualizada la historia laboral y registros de nómina de funcionarios del IDARTES. </dd>
									<dd>g. Adelantar estudios y análisis estadísticos. Oficina Asesora Jurídica</dd>
									<dd>h. Recopilar información de ciudadanos asistentes a capacitaciones, eventos y demás actividades desarrolladas por la entidad</dd>
									<dd>i. Atención de requerimientos judiciales o administrativos y el cumplimiento de mandatos judiciales o legales.</dd>
									<dd>j. Defensa del IDARTES en las acciones prejudiciales o judiciales que se adelanten en su contra.</dd>
									<dd>k. Enviar información de interés general.</dd>
									<dd>l. Dar respuesta a las peticiones, quejas, reclamos, denuncias, sugerencias o felicitaciones presentados a la entidad.</dd>
									<dd>m. Alimentar los Sistemas de Información.</dd>
									<dd>n. Conocer y consultar la información del titular que repose en bases de datos de entidades públicas o privadas. </dd>
									<dd>o. Caracterizar ciudadanos y grupos de interés y adelantar estrategias de mejoramiento en la prestación de los servicios a cargo del IDARTES.</dd>
									<dd>p. Conservar evidencia de los eventos, reuniones internas y externas, programas, planes y proyectos, realizados por el IDARTES.</dd>
									<dd>q. Efectuar la convocatoria y dejar evidencia de la realización de sesiones de rendición de cuentas y participación ciudadana.</dd>
									<dd>r. Medir y realizar seguimiento a los niveles de satisfacción de los usuarios de los servicios proporcionados por el IDARTES, a través de encuestas. Oficina Asesora Jurídica</dd>
									<dd>s. Para el uso de los servicios digitales que sean ofrecidos por el IDARTES, a través de su portal web https://www.idartes.gov.co/, u otros portales relacionados con proyectos, programas y planes desarrollados por la entidad.</dd>
									<dd>t. Registrar o autorizar el ingreso a las instalaciones del IDARTES.</dd>
									<dd>u. Para informa cambios sustanciales en el contenido de las políticas de tratamiento de datos personales de la entidad, que puedan afectar el contenido de la autorización, para la que fueron recolectados.</dd>
									<dd>v. De requerirse una finalidad distinta a las mencionadas en la presente política, esta debe ser acorde a la misionalidad, funciones y/o obligaciones legales en cabeza de la entidad y es obligación de la entidad informarla al titular de los datos en la autorización para la recolección de datos personales, que se le dará a conocer al momento de solicitar los datos requeridos para dicho fin.</dd>
								</dl>
								<li><p>DERECHOS DEL TITULAR:</p></li>
								<p>Sus derechos como titular de los datos son los previstos en la Constitución y la Ley 1581 de 2012, especialmente los siguientes:</p>
								<dl>
									<dd>a. Conocer, actualizar y rectificar sus datos personales frente a los Responsables del Tratamiento o Encargados del Tratamiento. Este derecho se podrá ejercer, entre otros frente a datos parciales, inexactos, incompletos,</dd>fraccionados, que induzcan a error, o aquellos cuyo Tratamiento esté expresamente prohibido o no haya sido autorizado. 
									<dd>b. Solicitar prueba de la autorización otorgada al Responsable del Tratamiento salvo cuando expresamente se exceptúe como requisito para el Tratamiento, de conformidad con lo previsto en el artículo 10 de la citada ley</dd>Oficina Asesora Jurídica 
									<dd>c. Ser informado por el Responsable del Tratamiento o el Encargado del Tratamiento, previa solicitud, respecto del uso que le ha dado a sus datos personales.</dd>
									<dd>d. Presentar ante la Superintendencia de Industria y Comercio quejas por infracciones a lo dispuesto en la citada ley y las demás normas que la modifiquen, adicionen o complementen.</dd>
									<dd>e. Revocar la autorización y/o solicitar la supresión del dato cuando en el Tratamiento no se respeten los principios, derechos y garantías constitucionales y legales. La revocatoria y/o supresión procederá cuando la </dd>Superintendencia de Industria y Comercio haya determinado que en el Tratamiento el Responsable o Encargado han incurrido en conductas contrarias a esta ley y a la Constitución 
									<dd>f. Acceder en forma gratuita a sus datos personales que hayan sido objeto de Tratamiento.</dd>
									<dd>g. Abstenerse de responder las preguntas sobre datos sensibles.</dd>
									<dd>h. Tendrán carácter facultativo las respuestas que versen sobre datos sensibles o sobre datos de las niñas, niños y adolescentes. Estos derechos lo podrán ejercer, utilizando los procedimientos de consultas, reclamos y peticiones determinados en la Política de Protección de Datos Personales del IDARTES, en el capítulo III, articulo 21 y 22, la cual podrá encontrar en nuestro sitio web: https://www.idartes.gov.co/. Por medio de los siguientes canales de atención:<br><br>

										Tipo de canal: Presenciales<br>
										Ubicación: Punto de atención al ciudadano<br>
										Mecanismo: Cra 8 No. 15 - 46 Bogotá - Colombia<br>
										Horario de atención: Lunes a Viernes 7:00 a.m. a 4:30 p.m.<br><br>

										Tipo de canal: Virtuales<br>
										Ubicación: Página web. <br>
										Mecanismo:	<a href="https://idartes.gov.co/es/formulario/contactenos">https://idartes.gov.co/es/formulario/contactenos</a>	<br>
										Horario de atención: Permanente<br><br>

										Tipo de canal: Virtuales<br>
										Ubicación: Correo institucional<br>
										Mecanismo: <a href="mailto:contactenos@idartes.gov.co">contactenos@idartes.gov.co</a><br>
										Horario de atención: Permanente<br><br>

										Tipo de canal: Servicio Postal<br>
										Ubicación: Remisión PQRSD a través de servicios postales.<br>
										Mecanismo: En la recepción ubicada en el primer piso del punto de atención al ciudadano en la Cra 8 No. 15 - 46 Bogotá - Colombia<br>
										Horario de atención: Lunes a Viernes 7:00 a.m. a 4:30 p.m.<br><br>
									</dd>
								</dl>
								<li><p>SOBRE EL INTERÉS SUPERIOR DE LOS MENORES DE EDAD Y EL TRATAMIENTO DE DATOS SENSIBLES:</p></li>
								<p>Manifiesto que, para recolectar la información de carácter sensible de niños, niñas y adolescentes, el IDARTES, me indicó por medio del presente documento que el tratamiento de dichos datos obedece al ejercicio del Interés Superior de los menores, y que dicho tratamiento se realiza de conformidad con sus derechos fundamentales contenidos en el artículo 44 de la Constitución Política Colombiana y conforme a las directrices de la jurisprudencia y las demás normativas concordantes. Adicionalmente manifiesto que El IDARTES me informó que tengo derecho a contestar o no las preguntas que me formulen y a entregar o no los datos solicitados.</p>
								<p>Entiendo que un dato sensible es todo dato personal que afectan la intimidad del titular o pueden dar lugar a que lo discriminen, es decir, aquellos que revelan su origen racial o étnico, su orientación política, las convicciones religiosas o filosóficas, la pertenencia a sindicatos, organizaciones sociales, de derechos humanos, así como los datos relativos a la salud, a la vida sexual, y los datos biométricos, entre otros. O los que traten sobre información de niños, niñas y adolescentes, diferente a la información de carácter público. En virtud de todo lo mencionado con anterioridad, he otorgado mi consentimiento al Instituto Distrital de las Artes- IDARTES, en ejercicio de la patria potestad y con custodia permanente definida en el artículo 288 del Código Civil Colombiano, para que trate la información personal del menor al que represento de acuerdo con la Política de Tratamiento de Datos Personales, dispuesta por el IDARTES en medio electrónico en la página web https://www.idartes.gov.co y que medió a conocer antes de recolectar mis datos personales. Adicionalmente otorgo autorización para que mis datos personales sean tratados, de acuerdo con las finalidades expuestas en la presente autorización. Manifiesto que la presente autorización me fue solicitada y puesta de presente antes de entregar los datos y que la suscribo de forma libre y voluntaria una vez leída en su totalidad.</p>
							</ol>
						</div>
					</div>
					<div class="form-row justify-content-center">
						<div class="form-group">
							<div class="custom-control custom-radio custom-control-inline">
								<input v-model="form.acepta_politicas" value="1" type="radio" id="radioButtonSi" name="politicas" class="custom-control-input" v-on:change="validarAceptaPoliticas()" required>
								<label class="custom-control-label" for="radioButtonSi">SI acepto que los datos sean recopilados y tratados</label>
							</div>
							<div class="custom-control custom-radio custom-control-inline">
								<input v-model="form.acepta_politicas" value="0" type="radio" id="radioButtonNo" name="politicas" class="custom-control-input" v-on:change="validarAceptaPoliticas()" required>
								<label class="custom-control-label" for="radioButtonNo">NO acepto que los datos sean recopilados y tratados</label>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="card" v-show="vf.card_info_cuidador">
				<div class="card-header bg-info"><i class="fas fa-handshake fa-2x"></i> DATOS DE CONTACTO DEL CUIDADOR</div>
				<div class="card-body">
					<div v-show="vf.info_cuidador_acepta_politicas">
						<div class="form-row">
							<div class="form-group col-lg-12">
								<label :class="{'required' : vf.info_cuidador_acepta_politicas}">¿Qué tipo de identificación tiene?</label>
								<multiselect v-model="form.tipo_documento_cuidador" label="text" :options="options_tipo_documento" placeholder="Seleccione una opción" :show-labels="false" track-by="value"></multiselect>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-lg-12">
								<label :class="{'required' : vf.info_cuidador_acepta_politicas}">¿Cuál es su número de documento?</label>
								<input v-model="form.numero_documento_cuidador" class="form-control" type="text" :required="vf.info_cuidador_acepta_politicas">
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-lg-12">
								<label :class="{'required' : vf.info_cuidador_acepta_politicas}">¿Cuál es su dirección de correo electrónico?</label>
								<input v-model="form.correo_cuidador" class="form-control" type="text" :required="vf.info_cuidador_acepta_politicas">
							</div>
						</div>	
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label class="required">¿A qué número telefónico podemos comunicarnos con usted?</label>
							<input v-model="form.numero_cuidador" class="form-control" type="number" required>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label class="required">¿Cual es el sexo del niño, niña o joven a quién va dirigida la atención?</label>
							<div class="custom-control custom-radio">
								<input v-model="form.dirigido" value="2" type="radio" id="radio-button-masculino" name="genero" class="custom-control-input" required>
								<label class="custom-control-label" for="radio-button-masculino">Masculino</label>
							</div>
							<div class="custom-control custom-radio">
								<input v-model="form.dirigido" value="3" type="radio" id="radio-button-femenino" name="genero" class="custom-control-input" required>
								<label class="custom-control-label" for="radio-button-femenino">Femenino</label>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="card" v-show="vf.card_parentesco">
				<div class="card-header bg-info"><i class="fas fa-user-shield fa-2x"></i> SOBRE EL PARENTESCO (Niño o niña a quien va dirigida la atención de Nidos)</div>
				<div class="card-body">
					<div class="form-row">
						<div class="form-group col-lg-6">
							<label :class="{'required' : vf.card_parentesco}">¿Cuál es su relación de parentesco?</label>
							<multiselect v-model="form.parentesco" label="text" @input="validarOtroParentesco()" :options="options_parentesco" placeholder="Seleccione una opción" :show-labels="false" track-by="value"></multiselect>
						</div>
						<div class="form-group col-lg-6">
							<label :class="{'required' : required_otro_parentesco}">Otro ¿Cuál?</label>
							<input v-model="form.otro_parentesco" class="form-control" type="text" :readonly="readonly_otro_parentesco" :required="required_otro_parentesco">
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label :class="{'required' : vf.card_parentesco}">¿Tiene usted la patria potestad?</label>
							<div class="custom-control custom-radio">
								<input v-model="form.potestad" value="1" type="radio" id="rbPatriaSi" name="patria" class="custom-control-input" :required="vf.card_parentesco" v-on:change="validarPotestad()">
								<label class="custom-control-label" for="rbPatriaSi">Si</label>
							</div>
							<div class="custom-control custom-radio">
								<input v-model="form.potestad" value="0" type="radio" id="rbPatriaNo" name="patria" class="custom-control-input" :required="vf.card_parentesco" v-on:change="validarPotestad()">
								<label class="custom-control-label" for="rbPatriaNo">No</label>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="card" v-show="vf.card_datos_beneficiario">
				<div class="card-header bg-info"><i class="fas fa-child fa-2x"></i> INFORMACIÓN GENERAL SOBRE LA PERSONA QUE RECIBE LA ATENCIÓN DE NIDOS (Niño, niña o mujer gestante)</div>
				<div class="card-body">
					<div class="si-acepta-politicas" v-show="vf.potestad_si">
						<div class="form-row">
							<div class="form-group col-lg-12">
								<label :class="{'required' : vf.potestad_si}">Primer nombre</label>
								<input v-model="form.primer_nombre_beneficiario" :required="vf.potestad_si" class="form-control" type="text" @input="form.primer_nombre_beneficiario=form.primer_nombre_beneficiario.toUpperCase();">
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-lg-12">
								<label>Segundo Nombre</label>
								<input v-model="form.segundo_nombre_beneficiario" class="form-control" type="text" @input="form.segundo_nombre_beneficiario=form.segundo_nombre_beneficiario.toUpperCase();">
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-lg-12">
								<label :class="{'required' : vf.potestad_si}">Primer apellido</label>
								<input v-model="form.primer_apellido_beneficiario" :required="vf.potestad_si" class="form-control" type="text" @input="form.primer_apellido_beneficiario=form.primer_apellido_beneficiario.toUpperCase();">
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-lg-12">
								<label>Segundo apellido</label>
								<input v-model="form.segundo_apellido_beneficiario" class="form-control" type="text" @input="form.segundo_apellido_beneficiario=form.segundo_apellido_beneficiario.toUpperCase();">
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-lg-12">
								<label :class="{'required' : vf.potestad_si}">Tipo de documento</label>
								<multiselect v-model="form.tipo_documento_beneficiario" label="text" :options="options_tipo_documento" placeholder="Seleccione una opción" :show-labels="false" track-by="value"></multiselect>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group col-lg-12">
								<label :class="{'required' : vf.potestad_si}">Número de documento</label>
								<input v-model="form.numero_documento_beneficiario" class="form-control" type="text" :required="vf.potestad_si">
							</div>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label class="required">Fecha de Nacimiento</label>
							<input v-model="form.fecha_nacimiento_beneficiario" class="form-control" type="date" required>
						</div>
					</div>

					<div class="form-row">
						<div class="form-group col-lg-12">
							<label>Dirección de residencia. (Al ser un dato sensible, no está obligado a suministrar esta información)</label>
							<input v-model="form.direccion_beneficiario" class="form-control" type="text">
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label class="required">Localidad de residencia</label>
							<multiselect v-model="form.localidad_beneficiario" label="text" :options="options_localidad" @input="getBarriosLocalidad()" placeholder="Seleccione una opción" :show-labels="false" track-by="value"></multiselect>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label class="required">Barrio de residencia</label>
							<multiselect v-model="form.barrio_beneficiario" label="text" :options="options_barrio" @input="getUpzBarrio()" placeholder="Seleccione una opción" :show-labels="false" track-by="value"></multiselect>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label>Estrato socioeconómico de la residencia</label>
							<multiselect v-model="form.estrato_beneficiario" label="text" :options="options_estrato" placeholder="Seleccione una opción" :show-labels="false" track-by="value"></multiselect>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label :class="{'required' : vf.acepta_politicas}">¿Se reconoce en una de las siguientes poblaciones o características?</label>
							<multiselect v-model="form.enfoque_beneficiario" label="text" :options="options_enfoque" placeholder="Seleccione una opción" :show-labels="false" track-by="value"></multiselect>
						</div>
					</div>
				</div>
			</div>
			<div class="card" v-show="vf.card_condicion_fisica">
				<div class="card-header bg-info"><i class="fas fa-handshake fa-2x"></i> CONDICIONES DE SALUD DEL NIÑO, NIÑA O JOVEN Y POSIBILIDADES TÉCNICAS</div>
				<div class="card-body">
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label>Condición de salud/enfermedad del niño, niña o joven que recibirá la atención <small>(haga una breve descripción)</small></label>
							<textarea v-model="form.condicion_salud" class="form-control"></textarea>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label>¿El niño, niña o joven tiene dificultades con su movilidad física? <small>(Si/No) Describa</small></label>
							<textarea v-model="form.dificultades_movilidad" class="form-control"></textarea>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label>¿El niño, niña o joven tiene alguna discapacidad? <small>(Si/No) ¿Cuál? Describa</small></label>
							<textarea v-model="form.discapacidad" class="form-control"></textarea>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label>¿El niño, niña o joven presenta alguna disminución de la capacidad en alguno de sus sentidos -ver, hablar, oír-? <small>(Si/No) Describa</small></label>
							<textarea v-model="form.disminucion_sentidos" class="form-control"></textarea>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label>¿El niño o niña o joven se encuentra hospitalizado actualmente?</label>
							<div class="custom-control custom-radio">
								<input v-model="form.hospitalizado" value="Si" type="radio" id="radio-button-hospitalizado-si" name="hospitalizado" class="custom-control-input" required>
								<label class="custom-control-label" for="radio-button-hospitalizado-si">Si</label>
							</div>
							<div class="custom-control custom-radio">
								<input v-model="form.hospitalizado" value="No" type="radio" id="radio-button-hospitalizado-no" name="hospitalizado" class="custom-control-input" required>
								<label class="custom-control-label" for="radio-button-hospitalizado-no">No</label>
							</div>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label>¿Cuántas veces ha estado hospitalizado el niño, niña o joven?</label>
							<input v-model="form.veces_hospitalizado" class="form-control" type="number">
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label>¿Hay un tiempo estimado para su recuperación? <small>(Si/No) Describa</small></label>
							<textarea v-model="form.tiempo_recuperacion" class="form-control"></textarea>
						</div>
					</div>
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label class="required">¿Se cuenta con un computador desde el cual se pueda acceder por internet y una conexión de wifi estable?</label>
							<div class="custom-control custom-radio">
								<input v-model="form.computador_internet" value="Si" type="radio" id="radio-button-internet-si" name="internet" class="custom-control-input" required>
								<label class="custom-control-label" for="radio-button-internet-si">Si</label>
							</div>
							<div class="custom-control custom-radio">
								<input v-model="form.computador_internet" value="No" type="radio" id="radio-button-internet-no" name="internet" class="custom-control-input" required>
								<label class="custom-control-label" for="radio-button-internet-no">No</label>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="card" v-show="vf.card_seleccion_oferta">
				<div class="card-header bg-info"> SELECCIÓN DE LA OFERTA DE ATENCIÓN</div>
				<div class="card-body">
					<div class="form-row">
						<div class="form-group col-lg-12">
							<label class="required">Edad mental del niño, niña o joven que recibirá la atención</label>
							<div class="custom-control custom-radio" v-for="(edad, index) in edades">
								<input v-model="form.edad_mental" v-on:change="validarTipoBeneficiario()" v-bind:value="edad.value" type="radio" v-bind:id="'radio-button-edad-fisica-'+edad.value" name="edad-fisica" class="custom-control-input" required>
								<label class="custom-control-label" v-bind:for="'radio-button-edad-fisica-'+edad.value">{{ edad.text }}</label>
							</div>
						</div>
					</div>

					<div class="form-row">
						<div class="form-group col-lg-12" v-show="vf.div_beneficiario_nidos">
							<div class="form-row">
								<div class="form-group col-lg-12">
									<label :class="{'required' : vf.div_beneficiario_nidos}">¿Qué te gustaría escuchar?</label>
									<div class="custom-control custom-radio">
										<input v-model="form.gustaria_escuchar" value="Canto" type="radio" id="radio-button-canto" name="beneficiario-nidos" class="custom-control-input" :required="vf.div_beneficiario_nidos">
										<label class="custom-control-label" for="radio-button-canto">Canto</label>
									</div>
									<div class="custom-control custom-radio">
										<input v-model="form.gustaria_escuchar" value="Cuentos" type="radio" id="radio-button-cuentos" name="beneficiario-nidos" class="custom-control-input" :required="vf.div_beneficiario_nidos">
										<label class="custom-control-label" for="radio-button-cuentos">Cuentos</label>
									</div>
								</div>
							</div>
						</div>
						<div class="form-group col-lg-12" v-show="vf.div_beneficiario_crea">
							<p>Desde esta línea se impulsa la creación de proyectos artísticos autónomos, partiendo de procesos de formación apoyados en proyectos de emprendimiento cultural, el uso de las nuevas tecnologías y la generación de alianzas para lograr acceso a los procesos profesionales tanto en la formación como en la inclusión de los circuitos propios del arte en la ciudad.</p>
							<p>Para formalizar su inscripción, le agradecemos enviar un correo a literatura.crea@idartes.gov.co diligenciando en el Asunto del correo: Aulas Hospitalarias, y adjuntando una foto o PDF de los siguientes documentos:</p>
							<ul>
								<li>Documento de identidad de la niña, niño o joven que tomará el proceso de formación.</li>
								<li>Recibo de un servicio público.</li>
								<li>Certificado de afiliación a SISBEN o EPS.</li>
							</ul>
						</div>
						<div class="form-group col-lg-12" v-show="vf.div_beneficiario_libro_al_viento">
							<p>Este es un programa de fomento a la lectura que busca transformar las canales y lugares habituales de circulación del libro y la literatura. Se trata de salir al encuentro de posibles lectores en espacios no convencionales como parques, transporte público, salas de espera, plazas de mercado, centros penitenciarios, hospitales, entre otros, y de posibilitar una circulación alternativa del libro.</p>
							<label :class="{'required' : vf.div_beneficiario_libro_al_viento}">¿Qué tema prefieres para tu lectura?</label>
							<div class="form-check" v-for="(lectura, index) in lecturas">
								<div class="row">
									<div class="col-lg-2">
										<input class="form-check-input" type="checkbox" name="lecturas" @click="validarLectura" v-bind:value="lectura.text" v-bind:required="vf.div_beneficiario_libro_al_viento && val_lectura == 0">
										<label class="form-check-label">{{ lectura.text }}</label><label class="form-check-label" v-if="lectura.text == 'Otro'">:</label>
									</div>
									<div class="col-lg-10" v-if="lectura.text == 'Otro'">
										<input v-model="form.otra_oferta_libro" class="form-control form-control-sm" type="text" :required="required_otra_lectura" :readonly="readonly_otra_lectura">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="form-row">
				<div class="form-group col-lg-4 offset-lg-4">
					<button type="submit" class="btn btn-block btn-primary">Enviar</button>
				</div>
			</div>
		</div>
	</form>
</template>
<script>

	import Multiselect from "vue-multiselect";
	export default {
		components: { Multiselect },
		data () {
			return {
				form:{
					acepta_politicas: null,
					tipo_documento_cuidador: null,
					numero_documento_cuidador: null,
					correo_cuidador: null,
					nume_cuidador: null,
					dirigido: null,
					parentesco: null,
					otro_parentesco: null,
					potestad: null,
					primer_nombre_beneficiario: null,
					segundo_nombre_beneficiario: null,
					primer_apellido_beneficiario: null,
					segundo_apellido_beneficiario: null,
					tipo_documento_beneficiario: null,
					numero_documento_beneficiario: null,
					fecha_nacimiento_beneficiario: null,
					direccion_beneficiario: null,
					localidad_beneficiario: null,
					barrio_beneficiario: null,
					upz_beneficiario: null,
					estrato_beneficiario: null,
					enfoque_beneficiario: null,
					condicion_salud: null,
					dificultades_movilidad: null,
					discapacidad: null,
					disminucion_sentidos: null,
					hospitalizado: null,
					veces_hospitalizado: null,
					tiempo_recuperacion: null,
					computador_internet: null,
					edad_mental: null,
					gustaria_escuchar: null,
					oferta_libro: [],
					otra_oferta_libro: null
				},
				vf:{
					card_condicion_fisica: false,
					card_info_cuidador: false,
					info_cuidador_acepta_politicas: false,
					card_parentesco: false,
					card_datos_beneficiario: false,
					card_seleccion_oferta: false,
					potestad_si: false,
					div_beneficiario_nidos: false,
					div_beneficiario_crea: false,
					div_beneficiario_libro_al_viento: false
				},
				options_tipo_documento: [],
				options_localidad: [],
				options_barrio: [],
				options_enfoque: [],
				options_estrato: [],
				options_parentesco: [
				{value: 1, text: "Padre o madre"},
				{value: 2, text: "Tío o tía"},
				{value: 3, text: "Abuelo o abuela"},
				{value: 6, text: "Otro"}
				],
				edades:[
				{value: 1, text: "1 mes a 1 año"},
				{value: 2, text: "2 años"},
				{value: 3, text: "3 años"},
				{value: 4, text: "4 años"},
				{value: 5, text: "5 años"},
				{value: 6, text: "6 años"},
				{value: 7, text: "7 años"},
				{value: 8, text: "8 años"},
				{value: 9, text: "9 años"},
				{value: 10, text: "10 años"},
				{value: 11, text: "11 años"},
				{value: 12, text: "12 años"},
				{value: 13, text: "13 años o más"}
				],
				lecturas : [
				{value: 1, text: "Animales"},
				{value: 2, text: "Amor"},
				{value: 3, text: "Suspenso"},
				{value: 4, text: "Terror y misterio"},
				{value: 5, text: "Ciencia Ficción"},
				{value: 6, text: "Mitos y Leyendas"},
				{value: 7, text: "Fantasía"},
				{value: 8, text: "Poesía"},
				{value: 9, text: "Historia"},
				{value: 10, text: "Historias de Bogotá"},
				{value: 11, text: "Crónicas"},
				{value: 12, text: "Biografías"},
				{value: 13, text: "Correspondencia"},
				{value: 14, text: "Otro"}
				],
				val_lectura: 0,
				required_otro_parentesco: "",
				readonly_otro_parentesco: "",

				required_otra_lectura: false,
				readonly_otra_lectura: true,
			}
		},
		mounted() {
			this.getParametroDetalle(5);
			this.getParametroDetalle(14);
			this.getParametroDetalle(19);
			this.getParametroDetalle(53);
		},
		methods: {
			validarAceptaPoliticas(){
				this.vf.card_info_cuidador = true;
				this.vf.card_datos_beneficiario = true;
				this.vf.card_condicion_fisica = true;
				this.vf.card_seleccion_oferta = true;
				if(this.form.acepta_politicas == 1){
					this.vf.card_parentesco = true;
					this.vf.info_cuidador_acepta_politicas = true;
				}else{
					this.vf.card_parentesco = false;
					this.vf.info_cuidador_acepta_politicas = false;
				}
			},
			validarPotestad(){	
				this.vf.potestad_si = this.form.potestad == 1 ? true : false;
			},
			validarOtroParentesco(){
				this.readonly_otro_parentesco = this.form.parentesco["value"] == 6 ? false : true;
				this.required_otro_parentesco = this.form.parentesco["value"] == 6 ? true : false;
				if(this.form.parentesco["value"] != 6)
					this.form.otro_parentesco = "";
			},
			validarTipoBeneficiario(){
				this.vf.div_beneficiario_nidos = false;
				this.vf.div_beneficiario_crea = false;
				this.vf.div_beneficiario_libro_al_viento = false;
				this.form.gustaria_escuchar = null;
				this.oferta_libro = [];
				this.otra_oferta_libro = null;

				document.getElementsByName('lecturas').forEach( el => {
					el.checked = false;
				});

				if(this.form.edad_mental < 6){
					this.vf.div_beneficiario_nidos = true;
				}
				if(this.form.edad_mental >= 6 && this.form.edad_mental < 13){
					this.vf.div_beneficiario_crea = true;
				}
				if(this.form.edad_mental == 13){
					this.vf.div_beneficiario_libro_al_viento = true;
				}
			},
			validarLectura: function(e){
				if(e.target.checked && e.target.value == "Otro"){
					this.required_otra_lectura = true;
					this.readonly_otra_lectura = false;
				}
				if(!e.target.checked && e.target.value == "Otro"){
					this.required_otra_lectura = false;
					this.readonly_otra_lectura = true;
					this.form.otra_oferta_libro = null
				}

				(e.target.checked) ? this.val_lectura++ : this.val_lectura--;
			},
			getParametroDetalle(FK_Id_Parametro){
				//5 tipo documento
				//19 localidades
				//53 estratos
				//14 enfoques diferenciales
				axios
				.post("/sif/framework/options/getParametroDetalle", {
					"X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
					"FK_Id_Parametro": FK_Id_Parametro,
					"programa": "nidos"
				})
				.then(response => {
					switch(FK_Id_Parametro){
						case 5:
						this.options_tipo_documento = response.data;
						break;
						case 14:
						this.options_enfoque = response.data;
						break;
						case 19:
						this.options_localidad = response.data;
						break;
						case 53:
						this.options_estrato = response.data;
						break;
					}
				})
				.catch(error => {
					Swal.fire("Error", "No se pudo obtener la información, por favor inténtelo nuevamente", "error");
				});
			},
			getBarriosLocalidad(){
				this.form.barrio_beneficiario = "";
				axios
				.post("/sif/framework/getBarriosLocalidad", {
					"X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
					"id_localidad": this.form.localidad_beneficiario.value
				})
				.then(response => {
					this.options_barrio = response.data;
				})
				.catch(error => {
					Swal.fire("Error", "No se pudo obtener el listado de barrios, por favor inténtelo nuevamente", "error");
				});
			},
			getUpzBarrio(){
				this.form.upz_beneficiario = "";
				axios
				.post("/sif/framework/getUpzBarrio", {
					"X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
					"id_barrio": this.form.barrio_beneficiario.value
				})
				.then(response => {
					this.form.upz_beneficiario = response.data.FK_Id_Upz;
				})
				.catch(error => {
					
				});
			},
			guardarSolicitudAulaHospitalaria: function(e){
				e.preventDefault();

				let validacion_politicas = 0;
				let validacion_residencia_beneficiario = 0;
				let validacion_tipo_documento_beneficiario = 0;

				this.form.oferta_libro = [];
				if(this.vf.div_beneficiario_libro_al_viento){
					document.getElementsByName('lecturas').forEach( el => {
						if(el.checked){
							this.form.oferta_libro.push(el.value);
						}
					});
				}
				
				if(this.vf.info_cuidador_acepta_politicas && (this.form.tipo_documento_cuidador == "" || this.form.tipo_documento_cuidador == null)){
					Swal.fire("Error", "Compruebe que ha seleccionado el tipo de documento del cuidador", "error");
					validacion_politicas++;
				}
				if(this.vf.info_cuidador_acepta_politicas && (this.form.parentesco == "" || this.form.parentesco == null)){
					Swal.fire("Error", "Compruebe que ha seleccionado la relación de parentesco" , "error");
					validacion_politicas++;
				}

				if(this.vf.potestad_si && (this.form.tipo_documento_beneficiario == "" || this.form.tipo_documento_beneficiario == null)){
					Swal.fire("Error", "Compruebe que ha seleccionado el tipo de documento del niño, niña o mujer gestante" , "error");
					validacion_tipo_documento_beneficiario++;
				}

				if(this.form.localidad_beneficiario == "" || this.form.localidad_beneficiario == null){
					Swal.fire("Error", "Compruebe que ha seleccionado la localidad de residencia del niño, niña o mujer gestante", "error");
					validacion_residencia_beneficiario++;
				}else if(this.form.barrio_beneficiario == "" || this.form.barrio_beneficiario == null){
					Swal.fire("Error", "Compruebe que ha seleccionado el barrio de residencia del niño, niña o mujer gestante", "error");
					validacion_residencia_beneficiario++;
				}

				if(validacion_politicas == 0 && validacion_residencia_beneficiario == 0 && validacion_tipo_documento_beneficiario == 0){
					axios
					.post("/sif/framework/nidos/formularios/aulashospitalarias/guardarSolicitudAulaHospitalaria", {
						"X-CSRF-TOKEN": $('meta[name="csrf-token"]').attr("content"),
						"form": JSON.stringify(this.form)
					})
					.then(response => {
						Swal.fire("Éxito", "Se ha guardado la información correctamente, pronto uno de nuestros artistas se comunicará contigo al número telefónico diligenciado en el formulario", "success");
						Object.keys(this.form).forEach( key => {
							this.form[key] = null;
						});
						Object.keys(this.vf).forEach( key => {
							this.vf[key] = false;
						});
					})
					.catch(error => {
						Swal.fire("Error", "No se pudo guardar la información, por favor inténtelo nuevamente", "error");
					});
				}
			}
		}
	}
</script>

<style type="text/css">
.required:after {
	content:" *";
	color: red;
}
textarea{
	min-height: 100px;
}
</style>


